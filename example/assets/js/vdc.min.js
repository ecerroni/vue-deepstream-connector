!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vdc=e():t.vdc=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(){Vue=this.Vue;var t=Vue.prototype;t.__callHook=t._callHook,t._callHook=function(t){if("created"==t){var e=this;l.each(this.$options.sync,function(t,n){e.$sync(n,t)})}this.__callHook(t)},t.__init=t._init,t._init=function(t){this.$$syncDict={},t=t||{},t.data=t.data||{},t.sync=t.sync||{};var e=l.extend({},this.constructor.options.sync||{},t.sync);l.extend(t.data,e),this.__init(t)},t.$unsync=function(t){var e=this.$$syncDict[t];e&&"function"==typeof e.stop&&e.stop()},t.$sync=function(t,e){if(this.$unsync(t),"function"==typeof e){var n=this;this.$$syncDict[t]=function(){var r;return r=e.call(n,t),n.$set(t,r)}()}},Vue.config.optionMergeStrategies.sync=Vue.config.optionMergeStrategies.computed,Vue.filter("ds-sync",{read:function(t,e){return void 0!=t&&this.$emit("ds-sync",t,e),t},write:function(t,e){return t}})}function i(t){return ds=t.path?u(t.host+":"+t.port,{path:"/deepstream"}):u(t.host+":"+t.port),r(),ds}function o(t,e,n){for(var r=0,i=t.length;i>r;r++)if(t[r][e]===n)return r;return-1}function s(t){var e=ds.record.getList(t);return console.log("I have subscribed you to the >> "+t+" List"),p.push({listName:t,listData:e}),console.log("# OF LIST SUBSCRIBED TO ",p.length),o(p,"listName",t)}function a(t){var e=t.listName,n=t.syncData,r=p[s(e)].listData,i=this,a=[],c=n;r.whenReady(function(){r.getEntries().forEach(function(t,e){var n=ds.record.getRecord(t);n.subscribe(function(t){console.log("[DS] EVENT: {SUBSCRIBE} ITEM [",t._uid,"]");var e=Object.keys(i.$$syncDict).indexOf(c)>-1?Object.keys(i.$$syncDict).indexOf(c):-1,n=null;if(e>-1){var r=-1;n=i.$data[c].find(function(e,n){return r=n,e._uid==t._uid}),n&&(console.log("[DS] FROM {SUBSCRIBE} HAVE ITEM [",n._uid,"] TO INSERT @ ",r),i.$data[c].$set(r,t))}}),n.whenReady(function(){a.safePush(n.get())})}),console.log("[DS] FETCH LIST ENTRIES: ",r.getEntries())}),r.on("entry-added",function(t){var e=ds.record.getRecord(t);e.subscribe(function(t){console.log("[DS] EVENT: {SUBSCRIBE} ITEM (LIST) [",t._uid,"]");var e=Object.keys(i.$$syncDict).indexOf(c)>-1?Object.keys(i.$$syncDict).indexOf(c):-1,n=null;if(e>-1){var r=-1;n=i.$data[c].find(function(e,n){return r=n,e._uid==t._uid}),n&&(console.log("[DS] FROM {SUBSCRIBE} FOUND ITEM [",n._uid,"] TO UPDATE @ ",r),i.$data[c].$set(r,t))}}),e.whenReady(function(){var n=(Object.keys(i.$$syncDict).indexOf(c)>-1?Object.keys(i.$$syncDict).indexOf(c):-1,{_uid:t}),r=null==e.get()._uid?n:e.get(),o=-1,s=i.$data[c].find(function(t,e){return o=e,t._uid==r._uid});s||i.$data[c].$safeSet(i.$data[c].length,r),console.log("[DS] EVENT: {ENTRY-ADDED} (LIST) | ITEM[",r._uid,"]")})}),r.on("entry-removed",function(t){var e=Object.keys(i.$$syncDict).indexOf(c)>-1?Object.keys(i.$$syncDict).indexOf(c):-1;if(e>-1){var n=i.$data[c].find(function(e){return e._uid==t});n?i.$data[c].$remove(n):null,n&&console.log("[DS] EVENT: {ENTRY-REMOVED} (LIST) | ITEM[",t,"]")}}),a._list=e,a._key=n;var i=this;return a.push=function(t){var e="[CONNECTOR] Push intercepted | Checking... [ FRESH UID ]";console.log(e);var r=ds.getUid(),s=a._key+"/"+r,c=Date.now(),h=ds.record.getRecord(s),u={_uid:s,_timestamp:c};for(var l in t)t.hasOwnProperty(l)&&(u[l]=t[l]);arguments[0]._uid=s,arguments[0]._timestamp=c,h.whenReady(function(){h.set(u)});var f=Object.keys(i.$$syncDict).indexOf(n)>-1?Object.keys(i.$$syncDict).indexOf(n):-1;return f>-1&&p[o(p,"listName",a._list)].listData.addEntry(s),console.log("[CONNECTOR] Pushed! Complete",[a._list,s,h]),this.__proto__.push.apply(this,arguments)},a.safePush=function(t){return this.__proto__.push.apply(this,arguments)},a.$set=function(t,e){console.log("[CONNECTOR] $set intercepted | Checking... [",e._uid,"] @",t),t>=a.length&&(a.length=Number(t)+1),a.splice(t,1,e)[0],console.log("[CONNECTOR] $set complete | Commit... [",e._uid,"]");var n=ds.record.getRecord(e._uid);n.whenReady(function(){n.set(e)})},a.$safeSet=function(t,e){console.log("[CONNECTOR] $safeSet intercepted | Checking... [",e._uid,"] @",t),t>=a.length&&(a.length=Number(t)+1),a.splice(t,1,e)[0],console.log("[CONNECTOR] $safeSet complete | Commit... [",e._uid,"]")},a.$remove=function(t){return console.log("[CONNECTOR] $remove intercepted | Deleting... [",t._uid,"] "),p[o(p,"listName",a._list)].listData.removeEntry(t._uid),this.__proto__.$remove.apply(this,arguments)},a}function c(t,e){var n=this,r=ds.record.getRecord(e);r.subscribe(function(e){console.log("[DS] EVENT: {SUBSCRIBE} ITEM (SINGLE ITEM) ",e);var r=Object.keys(n.$$syncDict).indexOf(t)>-1?Object.keys(n.$$syncDict).indexOf(t):-1;if(r>-1)for(var i in e)Object.hasOwnProperty(i)&&(console.log(i),n.$set(i,e[i]));n.$data[t]=r>-1?e:null}),r.whenReady(function(){n.$set(t,r.get())})}function h(t,e,n,r){var i,o=ds.record.getRecord(e),s=this;return o.subscribe(n,function(e){var n=Object.keys(s.$$syncDict).indexOf(t)>-1?Object.keys(s.$$syncDict).indexOf(t):-1;n>-1&&s.$set(t,e)}),o.whenReady(function(){var e=o.get();console.log('[DS] EVENT: {SUBSCRIBE} FIELD (SINGLE ITEM) ["'+n+'"]',"IN RECORD:  ",e),s.$set(t,o.get()[n]),i=o.get()[n]}),this.$on("ds-sync",function(r,i){if(t==i){console.log("[CONNECTOR] v-model change interecepted | Checking...","record[",e,"] field[",n,"] value[",r,"]");var o=ds.record.getRecord(e);o.whenReady(function(){console.log("newVal from update: ",r,"Value on rec: ",o.get(n)),r!=o.get(n)&&o.set(n,r)})}}),i}var u=n(27),l=n(61),p=[];t.exports={vDs:i,vueRecordFieldFetch:h,vueRecordFetch:c,vueListFetch:a}},function(t,e){e.CONNECTION_STATE={},e.CONNECTION_STATE.CLOSED="CLOSED",e.CONNECTION_STATE.AWAITING_AUTHENTICATION="AWAITING_AUTHENTICATION",e.CONNECTION_STATE.AUTHENTICATING="AUTHENTICATING",e.CONNECTION_STATE.OPEN="OPEN",e.CONNECTION_STATE.ERROR="ERROR",e.CONNECTION_STATE.RECONNECTING="RECONNECTING",e.MESSAGE_SEPERATOR=String.fromCharCode(30),e.MESSAGE_PART_SEPERATOR=String.fromCharCode(31),e.TYPES={},e.TYPES.STRING="S",e.TYPES.OBJECT="O",e.TYPES.NUMBER="N",e.TYPES.NULL="L",e.TYPES.TRUE="T",e.TYPES.FALSE="F",e.TYPES.UNDEFINED="U",e.TOPIC={},e.TOPIC.AUTH="A",e.TOPIC.ERROR="X",e.TOPIC.EVENT="E",e.TOPIC.RECORD="R",e.TOPIC.RPC="P",e.TOPIC.WEBRTC="W",e.TOPIC.PRIVATE="PRIVATE/",e.EVENT={},e.EVENT.CONNECTION_ERROR="connectionError",e.EVENT.CONNECTION_STATE_CHANGED="connectionStateChanged",e.EVENT.ACK_TIMEOUT="ACK_TIMEOUT",e.EVENT.RESPONSE_TIMEOUT="RESPONSE_TIMEOUT",e.EVENT.DELETE_TIMEOUT="DELETE_TIMEOUT",e.EVENT.UNSOLICITED_MESSAGE="UNSOLICITED_MESSAGE",e.EVENT.MESSAGE_PARSE_ERROR="MESSAGE_PARSE_ERROR",e.EVENT.VERSION_EXISTS="VERSION_EXISTS",e.EVENT.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.EVENT.LISTENER_EXISTS="LISTENER_EXISTS",e.EVENT.NOT_LISTENING="NOT_LISTENING",e.EVENT.TOO_MANY_AUTH_ATTEMPTS="TOO_MANY_AUTH_ATTEMPTS",e.EVENT.IS_CLOSED="IS_CLOSED",e.EVENT.UNKNOWN_CALLEE="UNKNOWN_CALLEE",e.EVENT.RECORD_NOT_FOUND="RECORD_NOT_FOUND",e.ACTIONS={},e.ACTIONS.ACK="A",e.ACTIONS.READ="R",e.ACTIONS.CREATE="C",e.ACTIONS.UPDATE="U",e.ACTIONS.PATCH="P",e.ACTIONS.DELETE="D",e.ACTIONS.SUBSCRIBE="S",e.ACTIONS.UNSUBSCRIBE="US",e.ACTIONS.HAS="H",e.ACTIONS.SNAPSHOT="SN",e.ACTIONS.INVOKE="I",e.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND="SP",e.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED="SR",e.ACTIONS.LISTEN="L",e.ACTIONS.UNLISTEN="UL",e.ACTIONS.PROVIDER_UPDATE="PU",e.ACTIONS.QUERY="Q",e.ACTIONS.CREATEORREAD="CR",e.ACTIONS.EVENT="EVT",e.ACTIONS.ERROR="E",e.ACTIONS.REQUEST="REQ",e.ACTIONS.RESPONSE="RES",e.ACTIONS.REJECTION="REJ",e.ACTIONS.WEBRTC_REGISTER_CALLEE="RC",e.ACTIONS.WEBRTC_UNREGISTER_CALLEE="URC",e.ACTIONS.WEBRTC_OFFER="OF",e.ACTIONS.WEBRTC_ANSWER="AN",e.ACTIONS.WEBRTC_ICE_CANDIDATE="IC",e.ACTIONS.WEBRTC_CALL_DECLINED="CD",e.ACTIONS.WEBRTC_CALL_ENDED="CE",e.ACTIONS.WEBRTC_LISTEN_FOR_CALLEES="LC",e.ACTIONS.WEBRTC_UNLISTEN_FOR_CALLEES="ULC",e.ACTIONS.WEBRTC_ALL_CALLEES="WAC",e.ACTIONS.WEBRTC_CALLEE_ADDED="WCA",e.ACTIONS.WEBRTC_CALLEE_REMOVED="WCR",e.ACTIONS.WEBRTC_IS_ALIVE="WIA",e.CALL_STATE={},e.CALL_STATE.INITIAL="INITIAL",e.CALL_STATE.CONNECTING="CONNECTING",e.CALL_STATE.ESTABLISHED="ESTABLISHED",e.CALL_STATE.ACCEPTED="ACCEPTED",e.CALL_STATE.DECLINED="DECLINED",e.CALL_STATE.ENDED="ENDED",e.CALL_STATE.ERROR="ERROR"},function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){var r=n(1),i=function(){this._actions=this._getActions()};i.prototype.parse=function(t,e){var n,i=[],o=t.split(r.MESSAGE_SEPERATOR);for(n=0;n<o.length;n++)o[n].length>2&&i.push(this._parseMessage(o[n],e));return i},i.prototype.convertTyped=function(t,e){var n=t.charAt(0);if(n===r.TYPES.STRING)return t.substr(1);if(n===r.TYPES.OBJECT)try{return JSON.parse(t.substr(1))}catch(i){return void e._$onError(r.TOPIC.ERROR,r.EVENT.MESSAGE_PARSE_ERROR,i.toString()+"("+t+")")}return n===r.TYPES.NUMBER?parseFloat(t.substr(1)):n===r.TYPES.NULL?null:n===r.TYPES.TRUE?!0:n===r.TYPES.FALSE?!1:n===r.TYPES.UNDEFINED?void 0:void e._$onError(r.TOPIC.ERROR,r.EVENT.MESSAGE_PARSE_ERROR,"UNKNOWN_TYPE ("+t+")")},i.prototype._getActions=function(){var t,e={};for(t in r.ACTIONS)e[r.ACTIONS[t]]=t;return e},i.prototype._parseMessage=function(t,e){var n=t.split(r.MESSAGE_PART_SEPERATOR),i={};return n.length<2?(t.processedError=!0,e._$onError(r.TOPIC.ERROR,r.EVENT.MESSAGE_PARSE_ERROR,"Insufficiant message parts"),null):void 0===this._actions[n[1]]?(t.processedError=!0,e._$onError(r.TOPIC.ERROR,r.EVENT.MESSAGE_PARSE_ERROR,"Unknown action "+n[1]),null):(i.raw=t,i.topic=n[0],i.action=n[1],i.data=n.splice(2),i)},t.exports=new i},function(t,e,n){(function(t){function r(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}function i(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=g[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}function o(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,e.encodePacket(t,n,!0,r)},i.readAsArrayBuffer(t.data)}function s(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(y)return o(t,n,r);var i=new Uint8Array(1);i[0]=g[t.type];var s=new v([i.buffer,t.data]);return r(s)}function a(t,e,n){for(var r=new Array(t.length),i=p(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},s=0;s<t.length;s++)o(s,t[s],i)}var c=n(48),h=n(50),u=n(23),l=n(24),p=n(22),f=n(64),d=navigator.userAgent.match(/Android/i),_=/PhantomJS/i.test(navigator.userAgent),y=d||_;e.protocol=3;var g=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},m=c(g),E={type:"error",data:"parser error"},v=n(25);e.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return i(e,n,a);if(v&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var h=g[e.type];return void 0!==e.data&&(h+=o?f.encode(String(e.data)):String(e.data)),a(""+h)},e.encodeBase64Packet=function(n,r){var i="b"+e.packets[n.type];if(v&&n.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(i+t)},o.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),h=new Array(c.length),u=0;u<c.length;u++)h[u]=c[u];s=String.fromCharCode.apply(null,h)}return i+=t.btoa(s),r(i)},e.decodePacket=function(t,n,r){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r)try{t=f.decode(t)}catch(i){return E}var o=t.charAt(0);return Number(o)==o&&m[o]?t.length>1?{type:m[o],data:t.substring(1)}:{type:m[o]}:E}var s=new Uint8Array(t),o=s[0],a=u(t,1);return v&&"blob"===n&&(a=new v([a])),{type:m[o],data:a}},e.decodeBase64Packet=function(e,n){var r=m[e.charAt(0)];if(!t.ArrayBuffer)return{type:r,data:{base64:!0,data:e.substr(1)}};var i=l.decode(e.substr(1));return"blob"===n&&v&&(i=new v([i])),{type:r,data:i}},e.encodePayload=function(t,n,r){function i(t){return t.length+":"+t}function o(t,r){e.encodePacket(t,s?n:!1,!0,function(t){r(null,i(t))})}"function"==typeof n&&(r=n,n=null);var s=h(t);return n&&s?v&&!y?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void a(t,o,function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);"function"==typeof n&&(r=n,n=null);var i;if(""==t)return r(E,0,1);for(var o,s,a="",c=0,h=t.length;h>c;c++){var u=t.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return r(E,0,1);if(s=t.substr(c+1,o),a!=s.length)return r(E,0,1);if(s.length){if(i=e.decodePacket(s,n,!0),E.type==i.type&&E.data==i.data)return r(E,0,1);var l=r(i,c+o,h);if(!1===l)return}c+=o,a=""}}return""!=a?r(E,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void a(t,r,function(t,e){var r=e.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}e?i[o++]=0:i[o++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),n(i.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,v){var c=new v([e.buffer,a.buffer,t]);n(null,c)}})}a(t,r,function(t,e){return n(new v(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],h="",l=1;255!=a[l];l++){if(h.length>310){s=!0;break}h+=a[l]}if(s)return r(E,0,1);i=u(i,2+h.length),h=parseInt(h);var p=u(i,0,h);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(f){var d=new Uint8Array(p);p="";for(var l=0;l<d.length;l++)p+=String.fromCharCode(d[l])}o.push(p),i=u(i,h)}var _=o.length;o.forEach(function(t,i){r(e.decodePacket(t,n,!0),i,_)})}}).call(e,function(){return this}())},function(t,e,n){var r=n(1),i=r.MESSAGE_PART_SEPERATOR;e.getMsg=function(t,e,n){if(n&&!(n instanceof Array))throw new Error("data must be an array");var o,s=[t,e];if(n)for(o=0;o<n.length;o++)"object"==typeof n[o]?s.push(JSON.stringify(n[o])):s.push(n[o]);return s.join(i)+r.MESSAGE_SEPERATOR},e.typed=function(t){var e=typeof t;if("string"===e)return r.TYPES.STRING+t;if(null===t)return r.TYPES.NULL;if("object"===e)return r.TYPES.OBJECT+JSON.stringify(t);if("number"===e)return r.TYPES.NUMBER+t.toString();if(t===!0)return r.TYPES.TRUE;if(t===!1)return r.TYPES.FALSE;if(void 0===t)return r.TYPES.UNDEFINED;throw new Error("Can't serialize type "+t)}},function(t,e,n){var r=n(1),i=function(t,e){this._client=t,this._resubscribe=e,this._isReconnecting=!1,this._connectionStateChangeHandler=this._handleConnectionStateChanges.bind(this),this._client.on("connectionStateChanged",this._connectionStateChangeHandler)};i.prototype.destroy=function(){this._client.removeListener("connectionStateChanged",this._connectionStateChangeHandler),this._connectionStateChangeHandler=null,this._client=null},i.prototype._handleConnectionStateChanges=function(){var t=this._client.getConnectionState();t===r.CONNECTION_STATE.RECONNECTING&&this._isReconnecting===!1&&(this._isReconnecting=!0),t===r.CONNECTION_STATE.OPEN&&this._isReconnecting===!0&&(this._isReconnecting=!1,this._resubscribe())},t.exports=i},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function a(){var t;try{t=e.storage.debug}catch(n){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=n(26),e.log=o,e.formatArgs=i,e.save=s,e.load=a,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,n){(function(t){var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r="object";e.isNode="undefined"!=typeof t&&"[object process]"===t.toString(),e.nextTick=function(n){e.isNode?t.nextTick(n):setTimeout(n,0)},e.trim=function(t){return t.trim?t.trim():t.replace(n,"")},e.deepEquals=function(t,e){return typeof t!==r||typeof e!==r?t===e:JSON.stringify(t)===JSON.stringify(e)},e.deepCopy=function(t){return typeof t===r?JSON.parse(JSON.stringify(t)):t}}).call(e,n(15))},function(t,e,n){var r=n(32),i=n(9),o=n(6),s=n(2),a=n(1),c=n(5),h=n(3),u="ALL_EVENT",l=function(t,e,n,r,i){this.name=t,this.usages=0,this._recordOptions=e,this._connection=n,this._client=i,this._options=r,this.isReady=!1,this.isDestroyed=!1,this._$data={},this._version=null,this._paths={},this._oldValue=null,this._oldPathValues=null,this._eventEmitter=new s,this._queuedMethodCalls=[],this._resubscribeNotifier=new o(this._client,this._sendRead.bind(this)),this._readAckTimeout=setTimeout(this._onTimeout.bind(this,a.EVENT.ACK_TIMEOUT),this._options.recordReadAckTimeout),this._readTimeout=setTimeout(this._onTimeout.bind(this,a.EVENT.RESPONSE_TIMEOUT),this._options.recordReadTimeout),this._sendRead()};s(l.prototype),l.prototype.get=function(t){var e;return e=t?this._getPath(t).getValue():this._$data,i.deepCopy(e)},l.prototype.set=function(t,e){if(1===arguments.length&&"object"!=typeof t)throw new Error("Invalid record data "+t+": Record data must be an object");if(!this._checkDestroyed("set"))return this.isReady?void(2===arguments.length&&i.deepEquals(this._getPath(t).getValue(),e)||1===arguments.length&&i.deepEquals(this._$data,t)||(this._beginChange(),this._version++,1===arguments.length?(this._$data=t,this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.UPDATE,[this.name,this._version,this._$data])):(this._getPath(t).setValue(e),this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.PATCH,[this.name,this._version,t,c.typed(e)])),this._completeChange())):void this._queuedMethodCalls.push({method:"set",args:arguments})},l.prototype.subscribe=function(t,e,n){var r=this._normalizeArguments(arguments);this._checkDestroyed("subscribe")||(this._eventEmitter.on(r.path||u,r.callback),r.triggerNow&&this.isReady&&(r.path?r.callback(this._getPath(r.path).getValue()):r.callback(this._$data)))},l.prototype.unsubscribe=function(t,e){if(!this._checkDestroyed("unsubscribe")){var n=2===arguments.length?t:u;this._eventEmitter.off(n,e)}},l.prototype.discard=function(){this.usages--,this.usages<=0&&(this.emit("destroyPending"),this._discardTimeout=setTimeout(this._onTimeout.bind(this,a.EVENT.ACK_TIMEOUT),this._options.subscriptionTimeout),this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.UNSUBSCRIBE,[this.name]))},l.prototype["delete"]=function(){this._checkDestroyed("delete")||(this.emit("destroyPending"),this._deleteAckTimeout=setTimeout(this._onTimeout.bind(this,a.EVENT.DELETE_TIMEOUT),this._options.recordDeleteTimeout),this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.DELETE,[this.name]))},l.prototype.whenReady=function(t){this.isReady===!0?t(this):this.once("ready",t.bind(this,this))},l.prototype._$onMessage=function(t){t.action===a.ACTIONS.READ?null===this._version?(clearTimeout(this._readTimeout),this._onRead(t)):this._applyUpdate(t,this._client):t.action===a.ACTIONS.ACK?this._processAckMessage(t):t.action===a.ACTIONS.UPDATE||t.action===a.ACTIONS.PATCH?this._applyUpdate(t,this._client):t.data[0]===a.EVENT.VERSION_EXISTS&&this._recoverRecord(t)},l.prototype._recoverRecord=function(t){t.processedError=!0,this.emit("error",a.EVENT.VERSION_EXISTS,"received update for "+t.version+" but version is "+this._version)},l.prototype._processAckMessage=function(t){var e=t.data[0];e===a.ACTIONS.SUBSCRIBE?clearTimeout(this._readAckTimeout):e===a.ACTIONS.DELETE?(this.emit("delete"),this._destroy()):e===a.ACTIONS.UNSUBSCRIBE&&(this.emit("discard"),this._destroy())},l.prototype._applyUpdate=function(t){var e=parseInt(t.data[1],10);null===this._version?this._version=e:this._version+1!==e&&this._recoverRecord(t),this._beginChange(),this._version=e,t.action===a.ACTIONS.PATCH?this._getPath(t.data[2]).setValue(h.convertTyped(t.data[3],this._client)):this._$data=JSON.parse(t.data[2]),this._completeChange()},l.prototype._onRead=function(t){this._beginChange(),this._version=parseInt(t.data[1],10),this._$data=JSON.parse(t.data[2]),this._completeChange(),this._setReady()},l.prototype._setReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethodCalls.length;t++)this[this._queuedMethodCalls[t].method].apply(this,this._queuedMethodCalls[t].args);this._queuedMethodCalls=[],this.emit("ready")},l.prototype._sendRead=function(){this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.CREATEORREAD,[this.name])},l.prototype._getPath=function(t){return this._paths[t]||(this._paths[t]=new r(this,t)),this._paths[t]},l.prototype._beginChange=function(){if(this._eventEmitter._callbacks){var t,e=Object.keys(this._eventEmitter._callbacks);for(this._oldPathValues={},this._eventEmitter.hasListeners(u)&&(this._oldValue=this.get()),t=0;t<e.length;t++)e[t]!==u&&(this._oldPathValues[e[t]]=this._getPath(e[t]).getValue())}},l.prototype._completeChange=function(){if(this._eventEmitter.hasListeners(u)&&!i.deepEquals(this._oldValue,this._$data)&&this._eventEmitter.emit(u,this.get()),this._oldValue=null,null!==this._oldPathValues){var t,e;for(t in this._oldPathValues)e=this._getPath(t).getValue(),e!==this._oldPathValues[t]&&this._eventEmitter.emit(t,e);this._oldPathValues=null}},l.prototype._normalizeArguments=function(t){var e,n={};if(1===t.length&&"object"==typeof t[0])return t[0];for(e=0;e<t.length;e++)"string"==typeof t[e]?n.path=t[e]:"function"==typeof t[e]?n.callback=t[e]:"boolean"==typeof t[e]&&(n.triggerNow=t[e]);return n},l.prototype._clearTimeouts=function(){clearTimeout(this._readAckTimeout),clearTimeout(this._deleteAckTimeout),clearTimeout(this._discardTimeout)},l.prototype._checkDestroyed=function(t){return this.isDestroyed?(this.emit("error","Can't invoke '"+t+"'. Record '"+this.name+"' is already destroyed"),!0):!1},l.prototype._onTimeout=function(t){this._clearTimeouts(),this.emit("error",t)},l.prototype._destroy=function(){this._clearTimeouts(),this._eventEmitter.off(),this._resubscribeNotifier.destroy(),this.isDestroyed=!0,this.isReady=!1,this._client=null,this._eventEmitter=null,this._connection=null},t.exports=l},function(t,e,n){var r=n(1),i=n(2),o=function(t,e,n){this._client=t,this._topic=e,this._timeoutDuration=n,this._register={}};i(o.prototype),o.prototype.add=function(t,e){var n=e?e+t:t;this._register[n]&&this.clear({data:[e,t]}),this._register[n]=setTimeout(this._onTimeout.bind(this,n,t),this._timeoutDuration)},o.prototype.clear=function(t){var e=t.data[1],n=t.data[0]+e,i=this._register[n]||this._register[e];i?clearTimeout(i):this._client._$onError(this._topic,r.EVENT.UNSOLICITED_MESSAGE,t.raw)},o.prototype._onTimeout=function(t,e){delete this._register[t];var n="No ACK message received in time for "+e;this._client._$onError(this._topic,r.EVENT.ACK_TIMEOUT,n),this.emit("timeout",e)},t.exports=o},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}var i=n(4),o=n(2);t.exports=r,o(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){var r=n(51);t.exports=function(t){var e=t.xdomain,n=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(o){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;i>r;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){function n(){l&&h&&(l=!1,h.length?u=h.concat(u):p=-1,u.length&&r())}function r(){if(!l){var t=s(n);l=!0;for(var e=u.length;e;){for(h=u,u=[];++p<e;)h&&h[p].run();p=-1,e=u.length}h=null,l=!1,a(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a,c=t.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var h,u=[],l=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||l||s(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e,n){var r=n(1),i=n(6),o=function(t,e,n,r,o,s){this._type=t,this._callback=n,this._pattern=e,this._options=r,this._client=o,this._connection=s,this._ackTimeout=setTimeout(this._onAckTimeout.bind(this),this._options.subscriptionTimeout),this._resubscribeNotifier=new i(o,this._sendListen.bind(this)),this._sendListen()};o.prototype.destroy=function(){this._connection.sendMsg(this._type,r.ACTIONS.UNLISTEN,[this._pattern]),this._resubscribeNotifier.destroy(),this._callback=null,this._pattern=null,this._client=null,this._connection=null},o.prototype._$onMessage=function(t){if(t.action===r.ACTIONS.ACK)clearTimeout(this._ackTimeout);else{var e=t.action===r.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND;this._callback(t.data[1],e)}},o.prototype._sendListen=function(){this._connection.sendMsg(this._type,r.ACTIONS.LISTEN,[this._pattern])},o.prototype._onAckTimeout=function(){this._client._$onError(this._type,r.EVENT.ACK_TIMEOUT,"No ACK message received in time for "+this._pattern)},t.exports=o},function(t,e,n){var r=n(2),i=n(1),o=function(){},s=function(t,e,n,r){this._connection=t,this._remoteId=r,this._localId=n,this._peerConnection=new RTCPeerConnection(e.rtcPeerConnectionConfig),this._peerConnection.onaddstream=this._onStream.bind(this),this._peerConnection.onicecandidate=this._onIceCandidate.bind(this),this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChange.bind(this),this._constraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}}};r(s.prototype),s.prototype.initiate=function(t,e){this._peerConnection.addStream(t),this._peerConnection.createOffer(this._onOfferCreated.bind(this,e),this._onError.bind(this))},s.prototype.close=function(){this._peerConnection.close()},s.prototype.addStream=function(t){this._peerConnection.addStream(t)},s.prototype.setRemoteDescription=function(t){this._peerConnection.setRemoteDescription(t,o,this._onError.bind(this))},s.prototype.createAnswer=function(){this._peerConnection.createAnswer(this._onAnswerCreated.bind(this),this._onError.bind(this),this._constraints)},s.prototype.addIceCandidate=function(t){this._peerConnection.addIceCandidate(t,o,this._onError.bind(this))},s.prototype._onStream=function(t){this.emit("stream",t.stream)},s.prototype._onOfferCreated=function(t,e){this._sendMsg(i.ACTIONS.WEBRTC_OFFER,JSON.stringify({sdp:e.sdp,type:e.type,meta:t})),this._peerConnection.setLocalDescription(e,o,this._onError.bind(this))},s.prototype._onAnswerCreated=function(t){this._sendMsg(i.ACTIONS.WEBRTC_ANSWER,t.toJSON()),this._peerConnection.setLocalDescription(t,o,this._onError.bind(this))},s.prototype._sendMsg=function(t,e){this._connection.sendMsg(i.TOPIC.WEBRTC,t,[this._localId,this._remoteId,e])},s.prototype._onIceCandidate=function(t){t.candidate&&this._sendMsg(i.ACTIONS.WEBRTC_ICE_CANDIDATE,t.candidate.toJSON())},s.prototype._onIceConnectionStateChange=function(){"disconnected"===this._peerConnection.iceConnectionState&&this._connection.sendMsg(i.TOPIC.WEBRTC,i.ACTIONS.WEBRTC_IS_ALIVE,[this._remoteId])},s.prototype._onError=function(t){this.emit("error",t)},t.exports=s},function(t,e,n){(function(t){function r(e){var n,r=!1,a=!1,c=!1!==e.jsonp;if(t.location){var h="https:"==location.protocol,u=location.port;
u||(u=h?443:80),r=e.hostname!=location.hostname||u!=e.port,a=e.secure!=h}if(e.xdomain=r,e.xscheme=a,n=new i(e),"open"in n&&!e.forceJSONP)return new o(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var i=n(13),o=n(46),s=n(45),a=n(47);e.polling=r,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;(!u||e)&&(this.supportsBinary=!1),i.call(this,t)}var i=n(12),o=n(14),s=n(4),a=n(7),c=n(21),h=n(8)("engine.io-client:polling");t.exports=r;var u=function(){var t=n(13),e=new t({xdomain:!1});return null!=e.responseType}();a(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){h("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(h("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){h("pre-pause polling complete"),--r||e()})),this.writable||(h("we are currently writing - waiting to pause"),r++,this.once("drain",function(){h("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){h("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;h("polling got data %s",t);var n=function(t,n,r){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():h('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){h("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(h("transport open - closing"),t()):(h("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")},e=this;s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(n=":"+this.port),t.length&&(t="?"+t);var r=-1!==this.hostname.indexOf(":");return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function n(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function r(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function i(){var t=n(+new Date);return t!==o?(h=0,o=t):t+"."+n(h++)}for(var o,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},h=0,u=0;a>u;u++)c[s[u]]=u;i.encode=n,i.decode=r,t.exports=i},function(t,e){function n(t,e,n){function i(t,r){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(o=!0,e(t),e=n):0!==i.count||o||e(null,r)}var o=!1;return n=n||r,i.count=t,0===t?e():i}function r(){}t.exports=n},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(0>e&&(e+=r),0>n&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;n>s;s++,a++)o[a]=i[s];return o.buffer}},function(t,e){!function(t){"use strict";e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;i>n;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(e){var n,r,i,o,s,a=.75*e.length,c=e.length,h=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(n=0;c>n;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),l[h++]=r<<2|i>>4,l[h++]=(15&i)<<4|o>>2,l[h++]=(3&o)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new o;n(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}function i(t,e){return n(t),new Blob(t,e||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return s?a?e.Blob:i:c?r:void 0}()}).call(e,function(){return this}())},function(t,e,n){function r(){return e.colors[u++%e.colors.length]}function i(t){function n(){}function i(){var t=i,n=+new Date,o=n-(h||n);t.diff=o,t.prev=h,t.curr=n,h=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var i=e.formatters[r];if("function"==typeof i){var o=s[a];n=i.call(t,o),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=i.log||e.log||console.log.bind(console);c.apply(t,s)}n.enabled=!1,i.enabled=!0;var o=e.enabled(t)?i:n;return o.namespace=t,o}function o(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;r>i;i++)n[i]&&(t=n[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;r>n;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;r>n;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i,e.coerce=c,e.disable=s,e.enable=o,e.enabled=a,e.humanize=n(55),e.names=[],e.skips=[],e.formatters={};var h,u=0},function(t,e,n){var r=n(1),i=n(2),o=n(30),s=n(29),a=n(35),c=n(34),h=n(41),u=n(28),l=function(t,e){this._url=t,this._options=this._getOptions(e||{}),this._connection=new o(this,this._url,this._options),this.event=new s(this._options,this._connection,this),this.rpc=new a(this._options,this._connection,this),this.record=new c(this._options,this._connection,this),this.webrtc=new h(this._options,this._connection,this),this._messageCallbacks={},this._messageCallbacks[r.TOPIC.WEBRTC]=this.webrtc._$handle.bind(this.webrtc),this._messageCallbacks[r.TOPIC.EVENT]=this.event._$handle.bind(this.event),this._messageCallbacks[r.TOPIC.RPC]=this.rpc._$handle.bind(this.rpc),this._messageCallbacks[r.TOPIC.RECORD]=this.record._$handle.bind(this.record),this._messageCallbacks[r.TOPIC.ERROR]=this._onErrorMessage.bind(this)};i(l.prototype),l.prototype.login=function(t,e){return this._connection.authenticate(t||{},e),this},l.prototype.close=function(){this._connection.close()},l.prototype.getConnectionState=function(){return this._connection.getState()},l.prototype.getUid=function(){var t=(new Date).getTime().toString(36),e=(1e16*Math.random()).toString(36).replace(".","");return t+"-"+e},l.prototype._$onMessage=function(t){this._messageCallbacks[t.topic]?this._messageCallbacks[t.topic](t):(t.processedError=!0,this._$onError(t.topic,r.EVENT.MESSAGE_PARSE_ERROR,"Received message for unknown topic "+t.topic)),t.action!==r.ACTIONS.ERROR||t.processedError||this._$onError(t.topic,t.action,t.data[0])},l.prototype._$onError=function(t,e,n){var i;if((e===r.EVENT.ACK_TIMEOUT||e===r.EVENT.RESPONSE_TIMEOUT)&&this.getConnectionState()===r.CONNECTION_STATE.AWAITING_AUTHENTICATION&&(i="Your message timed out because you're not authenticated. Have you called login()?",setTimeout(this._$onError.bind(this,r.EVENT.NOT_AUTHENTICATED,r.TOPIC.ERROR,i),1)),!this.hasListeners("error"))throw console.log("--- You can catch all deepstream errors by subscribing to the error event ---"),i=e+": "+n,t&&(i+=" ("+t+")"),new Error(i);this.emit("error",n,e,t),this.emit(e,t,n)},l.prototype._onErrorMessage=function(t){this._$onError(t.topic,t.data[0],t.data[1])},l.prototype._getOptions=function(t){var e,n={};for(e in u)"undefined"==typeof t[e]?n[e]=u[e]:n[e]=t[e];return n},t.exports=function(t,e){return new l(t,e)}},function(t,e){t.exports={recordPersistDefault:!0,reconnectIntervalIncrement:4e3,maxReconnectAttempts:5,rpcAckTimeout:6e3,rpcResponseTimeout:1e4,subscriptionTimeout:2e3,maxMessagesPerPacket:100,timeBetweenSendingQueuedPackages:16,recordReadAckTimeout:1e3,recordReadTimeout:3e3,recordDeleteTimeout:3e3,calleeAckTimeout:3e3,rtcPeerConnectionConfig:{iceServers:[{url:"stun:stun.services.mozilla.com"},{url:"stun:stun.l.google.com:19302"}]},agent:!1,upgrade:!0,forceJSONP:!1,jsonp:!0,forceBase64:!1,enablesXDR:!1,timestampRequests:!1,timestampParam:"t",policyPort:843,path:"/engine.io",transports:["polling","websocket"],rememberUpgrade:!1}},function(t,e,n){var r=n(5),i=n(3),o=n(11),s=n(6),a=n(1),c=n(16),h=n(2),u=function(t,e,n){this._options=t,this._connection=e,this._client=n,this._emitter=new h,this._listener={},this._ackTimeoutRegistry=new o(n,a.TOPIC.EVENT,this._options.subscriptionTimeout),this._resubscribeNotifier=new s(this._client,this._resubscribe.bind(this))};u.prototype.subscribe=function(t,e){this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add(t,a.ACTIONS.SUBSCRIBE),this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.SUBSCRIBE,[t])),this._emitter.on(t,e)},u.prototype.unsubscribe=function(t,e){this._emitter.off(t,e),this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add(t,a.ACTIONS.UNSUBSCRIBE),this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.UNSUBSCRIBE,[t]))},u.prototype.emit=function(t,e){this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.EVENT,[t,r.typed(e)]),this._emitter.emit(t,e)},u.prototype.listen=function(t,e){this._listener[t]?this._client._$onError(a.TOPIC.EVENT,a.EVENT.LISTENER_EXISTS,t):this._listener[t]=new c(a.TOPIC.EVENT,t,e,this._options,this._client,this._connection)},u.prototype.unlisten=function(t){this._listener[t]?(this._ackTimeoutRegistry.add(t,a.EVENT.UNLISTEN),this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(a.TOPIC.EVENT,a.EVENT.NOT_LISTENING,t)},u.prototype._$handle=function(t){var e=t.data[t.action===a.ACTIONS.ACK?1:0];return t.action===a.ACTIONS.EVENT?void(t.data&&2===t.data.length?this._emitter.emit(e,i.convertTyped(t.data[1],this._client)):this._emitter.emit(e)):this._listener[e]?void this._listener[e]._$onMessage(t):t.action===a.ACTIONS.ACK?void this._ackTimeoutRegistry.clear(t):t.action===a.ACTIONS.ERROR?(t.processedError=!0,void this._client._$onError(a.TOPIC.EVENT,t.data[0],t.data[1])):void this._client._$onError(a.TOPIC.EVENT,a.EVENT.UNSOLICITED_MESSAGE,e)},u.prototype._resubscribe=function(){var t=this._emitter._callbacks;for(var e in t)this._connection.sendMsg(a.TOPIC.EVENT,a.ACTIONS.SUBSCRIBE,[e])},t.exports=u},function(t,e,n){var r=n(42),i=n(3),o=n(5),s=n(38),a=n(9),c=n(1),h=function(t,e,n){this._client=t,this._url=e,this._options=n,this._authParams=null,this._authCallback=null,this._deliberateClose=!1,this._tooManyAuthAttempts=!1,this._queuedMessages=[],this._reconnectTimeout=null,this._reconnectionAttempt=0,this._currentPacketMessageCount=0,this._sendNextPacketTimeout=null,this._currentMessageResetTimeout=null,this._endpoint=null,this._state=c.CONNECTION_STATE.CLOSED,this._createEndpoint()};h.prototype.getState=function(){return this._state},h.prototype.authenticate=function(t,e){return this._tooManyAuthAttempts?void this._client._$onError(c.TOPIC.ERROR,c.EVENT.IS_CLOSED,"this client's connection was closed"):this._deliberateClose===!0&&this._state===c.CONNECTION_STATE.CLOSED?(this._createEndpoint(),this._deliberateClose=!1,void this._client.once(c.EVENT.CONNECTION_STATE_CHANGED,this.authenticate.bind(t,e))):(this._authParams=t,this._authCallback=e,void(this._state===c.CONNECTION_STATE.AWAITING_AUTHENTICATION&&this._sendAuthParams()))},h.prototype.sendMsg=function(t,e,n){this.send(o.getMsg(t,e,n))},h.prototype.send=function(t){this._queuedMessages.push(t),this._currentPacketMessageCount++,null===this._currentMessageResetTimeout&&(this._currentMessageResetTimeout=a.nextTick(this._resetCurrentMessageCount.bind(this))),this._state===c.CONNECTION_STATE.OPEN&&this._queuedMessages.length<this._options.maxMessagesPerPacket&&this._currentPacketMessageCount<this._options.maxMessagesPerPacket?this._sendQueuedMessages():null===this._sendNextPacketTimeout&&this._queueNextPacket()},h.prototype.close=function(){this._deliberateClose=!0,this._endpoint.close()},h.prototype._createEndpoint=function(){a.isNode?this._endpoint=new s(this._url):this._endpoint=r(this._url,this._options),this._endpoint.on("open",this._onOpen.bind(this)),this._endpoint.on("error",this._onError.bind(this)),this._endpoint.on("close",this._onClose.bind(this)),this._endpoint.on("message",this._onMessage.bind(this))},h.prototype._resetCurrentMessageCount=function(){this._currentPacketMessageCount=0,this._currentMessageResetTimeout=null},h.prototype._sendQueuedMessages=function(){if(this._state===c.CONNECTION_STATE.OPEN){if(0===this._queuedMessages.length)return void(this._sendNextPacketTimeout=null);var t=this._queuedMessages.splice(0,this._options.maxMessagesPerPacket).join("");0!==this._queuedMessages.length?this._queueNextPacket():this._sendNextPacketTimeout=null,this._endpoint.send(t)}},h.prototype._queueNextPacket=function(){var t=this._sendQueuedMessages.bind(this),e=this._options.timeBetweenSendingQueuedPackages;this._sendNextPacketTimeout=setTimeout(t,e)},h.prototype._sendAuthParams=function(){this._setState(c.CONNECTION_STATE.AUTHENTICATING);var t=o.getMsg(c.TOPIC.AUTH,c.ACTIONS.REQUEST,[this._authParams]);this._endpoint.send(t)},h.prototype._onOpen=function(){this._clearReconnect(),this._setState(c.CONNECTION_STATE.AWAITING_AUTHENTICATION),this._authParams&&this._sendAuthParams()},h.prototype._onError=function(t){this._setState(c.CONNECTION_STATE.ERROR),setTimeout(function(){this._client._$onError(null,c.EVENT.CONNECTION_ERROR,t.toString())}.bind(this),1)},h.prototype._onClose=function(){this._deliberateClose===!0?this._setState(c.CONNECTION_STATE.CLOSED):this._tryReconnect()},h.prototype._onMessage=function(t){var e,n=i.parse(t,this._client);for(e=0;e<n.length;e++)null!==n[e]&&(n[e].topic===c.TOPIC.AUTH?this._handleAuthResponse(n[e]):this._client._$onMessage(n[e]))},h.prototype._handleAuthResponse=function(t){t.action===c.ACTIONS.ERROR?(t.data[0]===c.EVENT.TOO_MANY_AUTH_ATTEMPTS?(this._deliberateClose=!0,this._tooManyAuthAttempts=!0):this._setState(c.CONNECTION_STATE.AWAITING_AUTHENTICATION),this._authCallback&&this._authCallback(!1,t.data[0],this._getAuthData(t.data[1]))):t.action===c.ACTIONS.ACK&&(this._setState(c.CONNECTION_STATE.OPEN),this._authCallback&&this._authCallback(!0,void 0,this._getAuthData(t.data[0])),this._sendQueuedMessages())},h.prototype._getAuthData=function(t){var e;return"undefined"!=typeof t&&(e=i.convertTyped(t,this._client)),e},h.prototype._setState=function(t){this._state=t,this._client.emit(c.EVENT.CONNECTION_STATE_CHANGED,t)},h.prototype._tryReconnect=function(){null===this._reconnectTimeout&&(this._reconnectionAttempt<this._options.maxReconnectAttempts?(this._setState(c.CONNECTION_STATE.RECONNECTING),this._reconnectTimeout=setTimeout(this._tryOpen.bind(this),this._options.reconnectIntervalIncrement*this._reconnectionAttempt),this._reconnectionAttempt++):(this._clearReconnect(),this.close()))},h.prototype._tryOpen=function(){this._endpoint.open(),this._reconnectTimeout=null},h.prototype._clearReconnect=function(){clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null,this._reconnectionAttempt=0},t.exports=h},function(t,e,n){var r=n(10),i=n(2),o=function(t){this.name=null,this._recordHandler=t,this._record=null,this._subscriptions=[],this._proxyMethod("delete"),this._proxyMethod("set"),this._proxyMethod("unsubscribe"),this._proxyMethod("discard")};i(o.prototype),o.prototype.get=function(t){return null===this._record?void 0:this._record.get(t)},o.prototype.subscribe=function(){var t=r.prototype._normalizeArguments(arguments);t.triggerNow=!0,this._subscriptions.push(t),null!==this._record&&this._record.subscribe(t)},o.prototype.unsubscribe=function(){var t,e=r.prototype._normalizeArguments(arguments),n=[];for(t=0;t<this._subscriptions.length;t++)(this._subscriptions[t].path!==e.path||this._subscriptions[t].callback!==e.callback)&&n.push(this._subscriptions[t]);this._subscriptions=n,null!==this._record&&this._record.unsubscribe(e)},o.prototype.setName=function(t){this.name=t;var e;if(null!==this._record&&!this._record.isDestroyed){for(e=0;e<this._subscriptions.length;e++)this._record.unsubscribe(this._subscriptions[e]);this._record.discard()}for(this._record=this._recordHandler.getRecord(t),e=0;e<this._subscriptions.length;e++)this._record.subscribe(this._subscriptions[e]);this._record.whenReady(this.emit.bind(this,"ready")),this.emit("nameChanged",t)},o.prototype._proxyMethod=function(t){this[t]=this._callMethodOnRecord.bind(this,t)},o.prototype._callMethodOnRecord=function(t){if(null===this._record)throw new Error("Can`t invoke "+t+". AnonymousRecord not initialised. Call setName first");if("function"!=typeof this._record[t])throw new Error(t+" is not a method on the record");var e=Array.prototype.slice.call(arguments,1);return this._record[t].apply(this._record,e)},t.exports=o},function(t,e,n){var r=n(9),i=/[\.\[\]]/g,o="*",s=function(t,e){this._record=t,this._path=String(e),this._tokens=[],this._tokenize()};s.prototype.getValue=function(){var t,e=this._record._$data;for(t=0;t<this._tokens.length;t++){if(void 0===e[this._tokens[t]])return void 0;e=e[this._tokens[t]]}return e},s.prototype.setValue=function(t){var e,n=this._record._$data;for(e=0;e<this._tokens.length-1;e++)n=void 0!==n[this._tokens[e]]?n[this._tokens[e]]:this._tokens[e+1]&&!isNaN(this._tokens[e+1])?n[this._tokens[e]]=[]:n[this._tokens[e]]={};n[this._tokens[e]]=t},s.prototype._tokenize=function(){var t,e,n=this._path.split(i);for(e=0;e<n.length;e++)t=r.trim(n[e]),0!==t.length&&(isNaN(t)?t!==o?this._tokens.push(t):this._tokens.push(!0):this._tokens.push(parseInt(t,10)))},t.exports=s},function(t,e,n){var r=n(2),i=n(10),o=n(1),s="entry-added",a="entry-removed",c="entry-moved",h=function(t,e,n){this._recordHandler=t,this._record=this._recordHandler.getRecord(e,n),this._record._applyUpdate=this._applyUpdate.bind(this),this._record.on("delete",this.emit.bind(this,"delete")),this._record.on("discard",this.emit.bind(this,"discard")),this._record.on("ready",this._onReady.bind(this)),this.isReady=this._record.isReady,this.name=e,this._queuedMethods=[],this._beforeStructure=null,this._hasAddListener=null,this._hasRemoveListener=null,this._hasMoveListener=null,this["delete"]=this._record["delete"].bind(this._record),this.discard=this._record.discard.bind(this._record),this.whenReady=this._record.whenReady.bind(this)};r(h.prototype),h.prototype.getEntries=function(){var t=this._record.get();return t instanceof Array?t:[]},h.prototype.isEmpty=function(){return 0===this.getEntries().length},h.prototype.setEntries=function(t){var e,n="entries must be an array of record names";if(!(t instanceof Array))throw new Error(n);for(e=0;e<t.length;e++)if("string"!=typeof t[e])throw new Error(n);this._record.isReady===!1?this._queuedMethods.push(this.setEntries.bind(this,t)):(this._beforeChange(),this._record.set(t),this._afterChange())},h.prototype.removeEntry=function(t,e){if(this._record.isReady===!1)return void this._queuedMethods.push(this.removeEntry.bind(this,t));var n,r=this._record.get(),i=this._hasIndex(e),o=[];for(n=0;n<r.length;n++)(r[n]!==t||i&&e!==n)&&o.push(r[n]);this._beforeChange(),this._record.set(o),this._afterChange()},h.prototype.addEntry=function(t,e){if("string"!=typeof t)throw new Error("Entry must be a recordName");if(this._record.isReady===!1)return void this._queuedMethods.push(this.addEntry.bind(this,t));var n=this._hasIndex(e),r=this.getEntries();n?r.splice(e,0,t):r.push(t),this._beforeChange(),this._record.set(r),this._afterChange()},h.prototype.subscribe=function(){var t=i.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.subscribe");t.callback=function(t){t(this.getEntries())}.bind(this,t.callback),this._record.subscribe(t)},h.prototype.unsubscribe=function(){var t=i.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.unsubscribe");this._record.unsubscribe(t)},h.prototype._onReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethods.length;t++)this._queuedMethods[t]();this.emit("ready")},h.prototype._applyUpdate=function(t){if(t.action===o.ACTIONS.PATCH)throw new Error("PATCH is not supported for Lists");"["!==t.data[2].charAt(0)&&(t.data[2]="[]"),this._beforeChange(),i.prototype._applyUpdate.call(this._record,t),this._afterChange()},h.prototype._hasIndex=function(t){var e=!1,n=this.getEntries();if(void 0!==t){if(isNaN(t))throw new Error("Index must be a number");if(t!==n.length&&(t>=n.length||0>t))throw new Error("Index must be within current entries");e=!0}return e},h.prototype._beforeChange=function(){this._hasAddListener=this.listeners(s).length>0,this._hasRemoveListener=this.listeners(a).length>0,this._hasMoveListener=this.listeners(c).length>0,this._hasAddListener||this._hasRemoveListener||this._hasMoveListener?this._beforeStructure=this._getStructure():this._beforeStructure=null},h.prototype._afterChange=function(){if(null!==this._beforeStructure){var t,e,n=this._getStructure(),r=this._beforeStructure;if(this._hasRemoveListener)for(t in r)for(e=0;e<r[t].length;e++)(void 0===n[t]||void 0===n[t][e])&&this.emit(a,t,r[t][e]);if(this._hasAddListener||this._hasMoveListener)for(t in n)if(void 0===r[t])for(e=0;e<n[t].length;e++)this.emit(s,t,n[t][e]);else for(e=0;e<n[t].length;e++)r[t][e]!==n[t][e]&&(void 0===r[t][e]?this.emit(s,t,n[t][e]):this.emit(c,t,n[t][e]))}},h.prototype._getStructure=function(){var t,e={},n=this._record.get();for(t=0;t<n.length;t++)void 0===e[n[t]]?e[n[t]]=[t]:e[n[t]].push(t);return e},t.exports=h},function(t,e,n){var r=n(10),i=n(31),o=n(33),s=n(16),a=n(39),c=n(1),h=n(3),u=n(2),l=function(t,e,n){this._options=t,this._connection=e,this._client=n,this._records={},this._listener={},this._destroyEventEmitter=new u,this._hasRegistry=new a(n,e,c.TOPIC.RECORD,c.ACTIONS.HAS,this._options.recordReadTimeout),this._snapshotRegistry=new a(n,e,c.TOPIC.RECORD,c.ACTIONS.SNAPSHOT,this._options.recordReadTimeout)};l.prototype.getRecord=function(t,e){return this._records[t]||(this._records[t]=new r(t,e||{},this._connection,this._options,this._client),this._records[t].on("error",this._onRecordError.bind(this,t)),this._records[t].on("destroyPending",this._onDestroyPending.bind(this,t)),this._records[t].on("deleted",this._removeRecord.bind(this,t)),this._records[t].on("discard",this._removeRecord.bind(this,t))),this._records[t].usages++,this._records[t]},l.prototype.getList=function(t,e){return new o(this,t,e)},l.prototype.getAnonymousRecord=function(){return new i(this)},l.prototype.listen=function(t,e){this._listener[t]?this._client._$onError(c.TOPIC.RECORD,c.EVENT.LISTENER_EXISTS,t):this._listener[t]=new s(c.TOPIC.RECORD,t,e,this._options,this._client,this._connection)},l.prototype.unlisten=function(t){this._listener[t]?(this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(c.TOPIC.RECORD,c.EVENT.NOT_LISTENING,t)},l.prototype.snapshot=function(t,e){this._records[t]?e(null,this._records[t].get()):this._snapshotRegistry.request(t,e)},l.prototype.has=function(t,e){this._records[t]?e(null,!0):this._hasRegistry.request(t,e)},l.prototype._$handle=function(t){var e;if(t.action===c.ACTIONS.ERROR&&t.data[0]!==c.EVENT.VERSION_EXISTS&&t.data[0]!==c.ACTIONS.SNAPSHOT&&t.data[0]!==c.ACTIONS.HAS)return t.processedError=!0,void this._client._$onError(c.TOPIC.RECORD,t.data[0],t.data[1]);if(t.action===c.ACTIONS.ACK||t.action===c.ACTIONS.ERROR){if(e=t.data[1],t.data[0]===c.ACTIONS.DELETE||t.data[0]===c.ACTIONS.UNSUBSCRIBE)return this._destroyEventEmitter.emit("destroy_ack_"+e,t),void(t.data[0]===c.ACTIONS.DELETE&&this._records[e]&&this._records[e]._$onMessage(t));if(t.data[0]===c.ACTIONS.SNAPSHOT)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2]);if(t.data[0]===c.ACTIONS.HAS)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2])}else e=t.data[0];var n=!1;this._records[e]&&(n=!0,this._records[e]._$onMessage(t)),t.action===c.ACTIONS.READ&&this._snapshotRegistry.hasRequest(e)&&(n=!0,this._snapshotRegistry.recieve(e,null,JSON.parse(t.data[2]))),t.action===c.ACTIONS.HAS&&this._hasRegistry.hasRequest(e)&&(n=!0,this._hasRegistry.recieve(e,null,h.convertTyped(t.data[1]))),this._listener[e]&&(n=!0,this._listener[e]._$onMessage(t)),n||this._client._$onError(c.TOPIC.RECORD,c.EVENT.UNSOLICITED_MESSAGE,e)},l.prototype._onRecordError=function(t,e){this._client._$onError(c.TOPIC.RECORD,e,t)},l.prototype._onDestroyPending=function(t){var e=this._records[t]._$onMessage.bind(this._records[t]);this._destroyEventEmitter.once("destroy_ack_"+t,e),this._removeRecord(t)},l.prototype._removeRecord=function(t){delete this._records[t]},t.exports=l},function(t,e,n){var r=n(1),i=n(11),o=n(6),s=n(36),a=n(37),c=n(3),h=n(5),u=function(t,e,n){this._options=t,this._connection=e,this._client=n,this._rpcs={},this._providers={},this._provideAckTimeouts={},this._ackTimeoutRegistry=new i(n,r.TOPIC.RPC,this._options.subscriptionTimeout),this._resubscribeNotifier=new o(this._client,this._reprovide.bind(this))};u.prototype.provide=function(t,e){if(this._providers[t])throw new Error("RPC "+t+" already registered");this._ackTimeoutRegistry.add(t,r.ACTIONS.SUBSCRIBE),this._providers[t]=e,this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.SUBSCRIBE,[t])},u.prototype.unprovide=function(t){this._providers[t]&&(delete this._providers[t],this._ackTimeoutRegistry.add(t,r.ACTIONS.UNSUBSCRIBE),this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.UNSUBSCRIBE,[t]))},u.prototype.make=function(t,e,n){var i=this._client.getUid(),o=h.typed(e);this._rpcs[i]=new a(this._options,n,this._client),this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.REQUEST,[t,i,o])},u.prototype._getRpc=function(t,e,n){var i=this._rpcs[t];return i?i:(this._client._$onError(r.TOPIC.RPC,r.EVENT.UNSOLICITED_MESSAGE,n),null)},u.prototype._respondToRpc=function(t){var e,n=t.data[0],i=t.data[1],o=null;t.data[2]&&(o=c.convertTyped(t.data[2],this._client)),this._providers[n]?(e=new s(this._connection,n,i),this._providers[n](o,e)):this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.REJECTION,[n,i])},u.prototype._$handle=function(t){var e,n,i;return t.action===r.ACTIONS.REQUEST?void this._respondToRpc(t):t.action!==r.ACTIONS.ACK||t.data[0]!==r.ACTIONS.SUBSCRIBE&&t.data[0]!==r.ACTIONS.UNSUBSCRIBE?(t.action===r.ACTIONS.ERROR?(e=t.data[1],n=t.data[2]):(e=t.data[0],n=t.data[1]),i=this._getRpc(n,e,t.raw),void(null!==i&&(t.action===r.ACTIONS.ACK?i.ack():t.action===r.ACTIONS.RESPONSE?(i.respond(t.data[2]),delete this._rpcs[n]):t.action===r.ACTIONS.ERROR&&(t.processedError=!0,i.error(t.data[0]),delete this._rpcs[n])))):void this._ackTimeoutRegistry.clear(t)},u.prototype._reprovide=function(){for(var t in this._providers)this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.SUBSCRIBE,[t])},t.exports=u},function(t,e,n){var r=n(1),i=n(9),o=n(5),s=function(t,e,n){this._connection=t,this._name=e,this._correlationId=n,this._isAcknowledged=!1,this._isComplete=!1,this.autoAck=!0,i.nextTick(this._performAutoAck.bind(this))};s.prototype.ack=function(){this._isAcknowledged===!1&&(this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.ACK,[this._name,this._correlationId]),this._isAcknowledged=!0)},s.prototype.reject=function(){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.REJECTION,[this._name,this._correlationId])},s.prototype.error=function(t){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.ERROR,[t,this._name,this._correlationId])},s.prototype.send=function(t){if(this._isComplete===!0)throw new Error("Rpc "+this._name+" already completed");var e=o.typed(t);this._connection.sendMsg(r.TOPIC.RPC,r.ACTIONS.RESPONSE,[this._name,this._correlationId,e]),this._isComplete=!0},s.prototype._performAutoAck=function(){this.autoAck===!0&&this.ack()},t.exports=s},function(t,e,n){var r=n(1),i=n(3),o=function(t,e,n){this._options=t,this._callback=e,this._client=n,this._ackTimeout=setTimeout(this.error.bind(this,r.EVENT.ACK_TIMEOUT),this._options.rpcAckTimeout),this._responseTimeout=setTimeout(this.error.bind(this,r.EVENT.RESPONSE_TIMEOUT),this._options.rpcResponseTimeout)};o.prototype.ack=function(){clearTimeout(this._ackTimeout)},o.prototype.respond=function(t){var e=i.convertTyped(t,this._client);this._callback(null,e),this._complete()},o.prototype.error=function(t){this._callback(t),this._complete()},o.prototype._complete=function(){clearTimeout(this._ackTimeout),clearTimeout(this._responseTimeout)},t.exports=o},function(t,e,n){(function(e){var r=n(67),i=n(63),o=n(49),s=n(66),a=n(1),c=function(t){this._socket=null,this._url=t,this._messageBuffer="",this._destroyFn=this._destroy.bind(this),e.on("exit",this._destroyFn),this.open(),this._isOpen=!1};s.inherits(c,o.EventEmitter),c.prototype.open=function(){this._socket=r.createConnection(this._getOptions()),this._socket.setEncoding("utf8"),this._socket.setKeepAlive(!0,5e3),this._socket.setNoDelay(!0),this._socket.on("data",this._onData.bind(this)),this._socket.on("error",this._onError.bind(this)),this._socket.on("connect",this._onConnect.bind(this)),this._socket.on("close",this._onClose.bind(this))},c.prototype.send=function(t){this._isOpen===!0?this._socket.write(t):this.emit("error","attempt to send message on closed socket: "+t)},c.prototype.close=function(){this._isOpen=!1,e.removeListener("exit",this._destroyFn),this._socket.end()},c.prototype._onError=function(t){var e;e="ECONNREFUSED"===t.code?"Can't connect! Deepstream server unreachable on "+this._url:t.toString(),this.emit("error",e)},c.prototype._onConnect=function(){this._isOpen=!0,this.emit("open")},c.prototype._onClose=function(){this._isOpen=!1,this.emit("close")},c.prototype._onData=function(t){if("string"!=typeof t)return void this.emit("error","received non-string message from socket");if(this._isOpen===!1)return void this.emit("error","received message on half closed socket: "+t);var e;return t.charAt(t.length-1)!==a.MESSAGE_SEPERATOR?void(this._messageBuffer+=t):(0!==this._messageBuffer.length?(e=this._messageBuffer+t,this._messageBuffer=""):e=t,void this.emit("message",e))},c.prototype._getOptions=function(){var t={};return-1===this._url.indexOf("/")?(t.hostname=this._url.split(":")[0],t.port=this._url.split(":")[1]):t=i.parse(this._url),{host:t.hostname,port:parseInt(t.port,10),allowHalfOpen:!1}},c.prototype._destroy=function(){this._socket.destroy()},t.exports=c}).call(e,n(15))},function(t,e,n){var r=n(1),o=n(6),s=function(t,e,n,r,i){this._client=t,this._connection=e,this._topic=n,this._action=r,this._timeoutDuration=i,this._requests={},this._resubscribeNotifier=new o(this._client,this._resendRequests.bind(this))};s.prototype.hasRequest=function(t){return!!this._requests[t]},s.prototype.request=function(t,e){var n;this._requests[t]||(this._requests[t]=[],this._connection.sendMsg(this._topic,this._action,[t])),n=setTimeout(this._onResponseTimeout.bind(this,t),this._timeoutDuration),this._requests[t].push({timeout:n,callback:e})},s.prototype.recieve=function(t,e,n){var r=this._requests[t];for(i=0;i<r.length;i++)entry=r[i],clearTimeout(entry.timeout),
entry.callback(e,n);delete this._requests[t]},s.prototype._onResponseTimeout=function(t){var e="No response received in time for "+this._topic+"|"+this._action+"|"+t;this._client._$onError(this._topic,r.EVENT.RESPONSE_TIMEOUT,e)},s.prototype._resendRequests=function(){for(var t in this._requests)this._connection.sendMsg(this._topic,this._action,[this._requests[t]])},t.exports=s},function(t,e,n){var r=n(17),i=n(2),o=n(1),s=function(t,e){this._connection=t.connection,this._localId=t.localId,this._remoteId=t.remoteId,this._localStream=t.localStream,this._offer=t.offer,this._$webRtcConnection=null,this._bufferedIceCandidates=[],this._options=e,this.state=o.CALL_STATE.INITIAL,this.metaData=t.metaData||null,this.callee=t.isOutgoing?t.remoteId:t.localId,this.isOutgoing=t.isOutgoing,this.isIncoming=!t.isOutgoing,this.isAccepted=!1,this.isDeclined=!1,this.isOutgoing&&this._initiate()};i(s.prototype),s.prototype.accept=function(t){if(this.isAccepted)throw new Error("Incoming call is already accepted");if(this.isDeclined)throw new Error("Can't accept incoming call. Call was already declined");this.isAccepted=!0,this._$webRtcConnection=new r(this._connection,this._options,this._localId,this._remoteId),t&&this._$webRtcConnection.addStream(t),this._$webRtcConnection.setRemoteDescription(new RTCSessionDescription(this._offer)),this._$webRtcConnection.createAnswer(),this._$webRtcConnection.on("stream",this._onEstablished.bind(this)),this._$webRtcConnection.on("error",this.emit.bind(this,"error"));for(var e=0;e<this._bufferedIceCandidates.length;e++)this._$webRtcConnection.addIceCandidate(this._bufferedIceCandidates[e]);this._bufferedIceCandidates=[],this._stateChange(o.CALL_STATE.ACCEPTED)},s.prototype.decline=function(t){if(this.isAccepted)throw new Error("Can't decline incoming call. Call was already accepted");if(this.isDeclined)throw new Error("Incoming call was already declined");this.isDeclined=!0,this._connection.sendMsg(o.TOPIC.WEBRTC,o.ACTIONS.WEBRTC_CALL_DECLINED,[this._localId,this._remoteId,t||null]),this._$declineReceived(t||null)},s.prototype.end=function(){this._connection.sendMsg(o.TOPIC.WEBRTC,o.ACTIONS.WEBRTC_CALL_ENDED,[this._localId,this._remoteId,null]),this._$close()},s.prototype._$close=function(){this._stateChange(o.CALL_STATE.ENDED),this._$webRtcConnection&&this._$webRtcConnection.close(),this.emit("ended")},s.prototype._$addIceCandidate=function(t){this.isIncoming&&this.isAccepted===!1?this._bufferedIceCandidates.push(t):this._$webRtcConnection.addIceCandidate(t)},s.prototype._$declineReceived=function(t){this.isDeclined=!0,this.isAccepted=!1,this._stateChange(o.CALL_STATE.DECLINED),this.emit("declined",t)},s.prototype._stateChange=function(t){this.state=t,this.emit("stateChange",t)},s.prototype._initiate=function(){this._stateChange(o.CALL_STATE.CONNECTING),this._$webRtcConnection=new r(this._connection,this._options,this._localId,this._remoteId),this._$webRtcConnection.initiate(this._localStream,this.metaData),this._$webRtcConnection.on("stream",this._onEstablished.bind(this))},s.prototype._onEstablished=function(t){this.isDeclined=!1,this.isAccepted=!0,this._stateChange(o.CALL_STATE.ESTABLISHED),this.emit("established",t)},t.exports=s},function(t,e,n){var r=n(1),i=(n(17),n(40)),o=n(11),s="callee-update",a=function(t,e,n){this._options=t,this._connection=e,this._client=n,this._localCallees={},this._remoteCallees=[],this._remoteCalleesCallback=null,this._ackTimeoutRegistry=new o(n,r.TOPIC.WEBRTC,this._options.calleeAckTimeout),this._ackTimeoutRegistry.on("timeout",this._removeCallee.bind(this)),this._calls={}};a.prototype.registerCallee=function(t,e){if(this._checkCompatibility(),"string"!=typeof t)throw new Error("Invalid callee name "+t);if("function"!=typeof e)throw new Error("Callback is not a function");if(this._localCallees[t])throw new Error("Callee "+t+" is already registered");this._localCallees[t]=e,this._ackTimeoutRegistry.add(t),this._connection.sendMsg(r.TOPIC.WEBRTC,r.ACTIONS.WEBRTC_REGISTER_CALLEE,[t])},a.prototype.unregisterCallee=function(t){if(!this._localCallees[t])throw new Error("Callee is not registered");this._removeCallee(t),this._ackTimeoutRegistry.add(t),this._connection.sendMsg(r.TOPIC.WEBRTC,r.ACTIONS.WEBRTC_UNREGISTER_CALLEE,[t])},a.prototype.makeCall=function(t,e,n){if(this._checkCompatibility(),"string"!=typeof t)throw new Error("Callee must be provided as string");if("object"!=typeof e)throw new Error("metaData must be provided");if(this._calls[t])throw new Error("Call with "+t+" is already in progress");var r=this._client.getUid();return this._ackTimeoutRegistry.add(r),this._createCall(t,{isOutgoing:!0,connection:this._connection,localId:r,remoteId:t,localStream:n,offer:null,metaData:e})},a.prototype.listenForCallees=function(t){if(null!==this._remoteCalleesCallback)throw new Error("Already listening for callees");this._remoteCalleesCallback=t,this._ackTimeoutRegistry.add(s),this._connection.sendMsg(r.TOPIC.WEBRTC,r.ACTIONS.WEBRTC_LISTEN_FOR_CALLEES)},a.prototype.unlistenForCallees=function(){if(!this._remoteCalleesCallback)throw new Error("Not listening for callees");this._remoteCalleesCallback=null,this._ackTimeoutRegistry.add(s),this._connection.sendMsg(r.TOPIC.WEBRTC,r.ACTIONS.WEBRTC_UNLISTEN_FOR_CALLEES)},a.prototype._handleIncomingCall=function(t){var e=t.data[0],n=t.data[1],r=JSON.parse(t.data[2]),i=this._createCall(e,{isOutgoing:!1,connection:this._connection,localId:n,remoteId:e,localStream:null,metaData:r.meta,offer:r});this._localCallees[n](i,r.meta)},a.prototype._removeCall=function(t){delete this._calls[t]},a.prototype._createCall=function(t,e){return this._calls[t]=new i(e,this._options),this._calls[t].on("ended",this._removeCall.bind(this,t)),this._calls[t]},a.prototype._isValidMessage=function(t){return 3===t.data.length&&"string"==typeof t.data[0]&&"string"==typeof t.data[1]&&"string"==typeof t.data[2]},a.prototype._isCalleeUpdate=function(t){return t.action===r.ACTIONS.WEBRTC_ALL_CALLEES||t.action===r.ACTIONS.WEBRTC_CALLEE_ADDED||t.action===r.ACTIONS.WEBRTC_CALLEE_REMOVED},a.prototype._checkCompatibility=function(){if("undefined"==typeof RTCPeerConnection||"undefined"==typeof RTCSessionDescription||"undefined"==typeof RTCIceCandidate){var t="RTC global objects not detected. \n";throw t+="deepstream expects a standardized WebRtc implementation (e.g. no vendor prefixes etc.) \n",t+="until WebRtc is fully supported, we recommend including the official WebRTC adapter script \n",t+="which can be found at https://github.com/webrtc/adapter",new Error(t)}},a.prototype._removeCallee=function(t){delete this._localCallees[t]},a.prototype._processCalleeUpdate=function(t){if(null===this._remoteCalleesCallback)return void this._client._$onError(r.TOPIC.WEBRTC,r.EVENT.UNSOLICITED_MESSAGE,t.raw);t.action===r.ACTIONS.WEBRTC_ALL_CALLEES&&(this._remoteCallees=t.data);var e=this._remoteCallees.indexOf(t.data[0]);if(t.action===r.ACTIONS.WEBRTC_CALLEE_ADDED){if(-1!==e)return;this._remoteCallees.push(t.data[0])}else if(t.action===r.ACTIONS.WEBRTC_CALLEE_REMOVED){if(-1===e)return;this._remoteCallees.splice(e,1)}this._remoteCalleesCallback(this._remoteCallees)},a.prototype._$handle=function(t){var e,n,i;return t.action===r.ACTIONS.ERROR?void this._client._$onError(r.TOPIC.WEBRTC,t.data[0],t.data[1]):t.action===r.ACTIONS.ACK?void this._ackTimeoutRegistry.clear(t):this._isCalleeUpdate(t)?void this._processCalleeUpdate(t):t.action===r.ACTIONS.WEBRTC_IS_ALIVE?void("false"===t.data[1]&&this._calls[t.data[0]]&&this._calls[t.data[0]]._$close()):this._isValidMessage(t)?t.action===r.ACTIONS.WEBRTC_OFFER?void this._handleIncomingCall(t):(e=this._calls[t.data[0]]||this._calls[t.data[1]])?t.action===r.ACTIONS.WEBRTC_ANSWER?(n=new RTCSessionDescription(JSON.parse(t.data[2])),void e._$webRtcConnection.setRemoteDescription(n)):t.action===r.ACTIONS.WEBRTC_ICE_CANDIDATE?(i=new RTCIceCandidate(JSON.parse(t.data[2])),void e._$addIceCandidate(i)):t.action===r.ACTIONS.WEBRTC_CALL_DECLINED?void e._$declineReceived(t.data[2]):t.action===r.ACTIONS.WEBRTC_CALL_ENDED?void e._$close():void this._client._$onError(r.TOPIC.WEBRTC,r.EVENT.EVENT.MESSAGE_PARSE_ERROR,"unsupported action "+t.action):void this._client._$onError(r.TOPIC.WEBRTC,r.EVENT.UNSOLICITED_MESSAGE,t.raw):void this._client._$onError(r.TOPIC.WEBRTC,r.EVENT.MESSAGE_PARSE_ERROR,t)},t.exports=a},function(t,e,n){t.exports=n(43)},function(t,e,n){t.exports=n(44),t.exports.parser=n(4)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"==t.protocol||"wss"==t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"==location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate?n.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized;var i="object"==typeof e&&e;i.global===i&&n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),this.open()}function i(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=n(18),s=n(2),a=n(8)("engine.io-client:socket"),c=n(52),h=n(4),u=n(57),l=n(56),p=n(14);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=h.protocol,r.Socket=r,r.Transport=n(12),r.transports=n(18),r.parser=n(4),r.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=i(this.query);e.EIO=h.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return n},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;l=l||e}l||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!l)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),p.upgrading=!0,p.emit("upgrading",u),!u)return;r.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){l||"closed"!=p.readyState&&(a("changing transport and sending upgrade packet"),h(),p.setTransport(u),u.send([{type:"upgrade"}]),p.emit("upgrade",u),u=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=u.name,p.emit("upgradeError",n)}}))}function n(){l||(l=!0,h(),u.close(),u=null)}function i(e){var r=new Error("probe error: "+e);r.transport=u.name,n(),a('probe transport "%s" failed because of error: %s',t,e),p.emit("upgradeError",r)}function o(){i("transport closed")}function s(){i("socket closed")}function c(t){u&&t.name!=u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),n())}function h(){u.removeListener("open",e),u.removeListener("error",i),u.removeListener("close",o),p.removeListener("close",s),p.removeListener("upgrading",c)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),l=!1,p=this;r.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",i),u.once("close",o),this.once("close",s),this.once("upgrading",c),u.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(l(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;r>n;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(){}function i(t){o.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var o=n(19),s=n(7);t.exports=i;var a,c=/\n/g,h=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(t){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(h,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(){}function i(t){if(c.call(this,t),e.location){var n="https:"==location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!=e.location.hostname||r!=t.port,this.xs=t.secure!=n}else this.extraHeaders=t.extraHeaders}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var a=n(13),c=n(19),h=n(2),u=n(7),l=n(8)("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,u(i,c),i.prototype.supportsBinary=!0,i.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.extraHeaders=this.extraHeaders,new o(t)},i.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},i.prototype.doPoll=function(){l("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},h(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{l("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.extraHeaders[i])}}catch(s){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}"withCredentials"in n&&(n.withCredentials=!0),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4==n.readyState&&(200==n.status||1223==n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},l("xhr data %s",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}e.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(n){}e.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var r=new Uint8Array(this.xhr.response),i=[],o=0,s=r.length;s>o;o++)i.push(r[o]);t=String.fromCharCode.apply(null,i)}else t=this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},e.document&&(o.requestsCount=0,o.requests={},e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,i.call(this,t)}var i=n(12),o=n(4),s=n(14),a=n(7),c=n(21),h=n(8)("engine.io-client:websocket"),u=e.WebSocket||e.MozWebSocket,l=u;if(!l&&"undefined"==typeof window)try{l=n(68)}catch(p){}t.exports=r,a(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.ws=u?new l(t):new l(t,e,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(t){var e=this;setTimeout(function(){i.prototype.onData.call(e,t)},0)}),r.prototype.write=function(t){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=t.length,s=0,a=i;a>s;s++)!function(t){o.encodePacket(t,r.supportsBinary,function(o){if(!u){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate){var a="string"==typeof o?e.Buffer.byteLength(o):o.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{u?r.ws.send(o):r.ws.send(o,s)}catch(c){h("websocket closed before onclose event")}--i||n()})}(t[s])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t);var r=-1!==this.hostname.indexOf(":");return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,a,c,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),h=n.slice(),i=h.length,c=0;i>c;c++)h[c].apply(this,a);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(function(e){function r(t){function n(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(n(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&n(t[o]))return!0}return!1}return n(t)}var i=n(54);t.exports=r}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*h;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":
case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(t){return t>=h?Math.round(t/h)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function i(t){return o(t,h,"day")||o(t,c,"hour")||o(t,a,"minute")||o(t,s,"second")||t+" ms"}function o(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,h=24*c,u=365.25*h;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?i(t):r(t)}},function(t,e){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var h=0;c>h;++h){var u,l,p,f,d=t[h].replace(s,"%20"),_=d.indexOf(r);_>=0?(u=d.substr(0,_),l=d.substr(_+1)):(u=d,l=""),p=decodeURIComponent(u),f=decodeURIComponent(l),n(o,p)?Array.isArray(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(n(t))}).join(e):o+encodeURIComponent(n(t[i]))}).join(e):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";e.decode=e.parse=n(58),e.encode=e.stringify=n(59)},function(t,e,n){var r,i;(function(){function n(t){function e(e,n,r,i,o,s){for(;o>=0&&s>o;o+=t){var a=i?i[o]:o;r=n(r,e[a],a,e)}return r}return function(n,r,i,o){r=b(r,o,4);var s=!w(n)&&C.keys(n),a=(s||n).length,c=t>0?0:a-1;return arguments.length<3&&(i=n[s?s[c]:c],c+=t),e(n,r,i,s,c,a)}}function o(t){return function(e,n,r){n=S(n,r);for(var i=I(e),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function s(t,e,n){return function(r,i,o){var s=0,a=I(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(d.call(r,s,a),C.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&a>o;o+=t)if(r[o]===i)return o;return-1}}function a(t,e){var n=D.length,r=t.constructor,i=C.isFunction(r)&&r.prototype||l,o="constructor";for(C.has(t,o)&&!C.contains(e,o)&&e.push(o);n--;)o=D[n],o in t&&t[o]!==i[o]&&!C.contains(e,o)&&e.push(o)}var c=this,h=c._,u=Array.prototype,l=Object.prototype,p=Function.prototype,f=u.push,d=u.slice,_=l.toString,y=l.hasOwnProperty,g=Array.isArray,m=Object.keys,E=p.bind,v=Object.create,T=function(){},C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=C),e._=C,C.VERSION="1.8.3";var b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},S=function(t,e,n){return null==t?C.identity:C.isFunction(t)?b(t,e,n):C.isObject(t)?C.matcher(t):C.property(t)};C.iteratee=function(t,e){return S(t,e,1/0)};var O=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],s=t(o),a=s.length,c=0;a>c;c++){var h=s[c];e&&void 0!==n[h]||(n[h]=o[h])}return n}},A=function(t){if(!C.isObject(t))return{};if(v)return v(t);T.prototype=t;var e=new T;return T.prototype=null,e},N=function(t){return function(e){return null==e?void 0:e[t]}},R=Math.pow(2,53)-1,I=N("length"),w=function(t){var e=I(t);return"number"==typeof e&&e>=0&&R>=e};C.each=C.forEach=function(t,e,n){e=b(e,n);var r,i;if(w(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=C.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},C.map=C.collect=function(t,e,n){e=S(e,n);for(var r=!w(t)&&C.keys(t),i=(r||t).length,o=Array(i),s=0;i>s;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o},C.reduce=C.foldl=C.inject=n(1),C.reduceRight=C.foldr=n(-1),C.find=C.detect=function(t,e,n){var r;return r=w(t)?C.findIndex(t,e,n):C.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},C.filter=C.select=function(t,e,n){var r=[];return e=S(e,n),C.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},C.reject=function(t,e,n){return C.filter(t,C.negate(S(e)),n)},C.every=C.all=function(t,e,n){e=S(e,n);for(var r=!w(t)&&C.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},C.some=C.any=function(t,e,n){e=S(e,n);for(var r=!w(t)&&C.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},C.contains=C.includes=C.include=function(t,e,n,r){return w(t)||(t=C.values(t)),("number"!=typeof n||r)&&(n=0),C.indexOf(t,e,n)>=0},C.invoke=function(t,e){var n=d.call(arguments,2),r=C.isFunction(e);return C.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},C.pluck=function(t,e){return C.map(t,C.property(e))},C.where=function(t,e){return C.filter(t,C.matcher(e))},C.findWhere=function(t,e){return C.find(t,C.matcher(e))},C.max=function(t,e,n){var r,i,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=w(t)?t:C.values(t);for(var a=0,c=t.length;c>a;a++)r=t[a],r>o&&(o=r)}else e=S(e,n),C.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=t,s=i)});return o},C.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=w(t)?t:C.values(t);for(var a=0,c=t.length;c>a;a++)r=t[a],o>r&&(o=r)}else e=S(e,n),C.each(t,function(t,n,r){i=e(t,n,r),(s>i||i===1/0&&o===1/0)&&(o=t,s=i)});return o},C.shuffle=function(t){for(var e,n=w(t)?t:C.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=C.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},C.sample=function(t,e,n){return null==e||n?(w(t)||(t=C.values(t)),t[C.random(t.length-1)]):C.shuffle(t).slice(0,Math.max(0,e))},C.sortBy=function(t,e,n){return e=S(e,n),C.pluck(C.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var k=function(t){return function(e,n,r){var i={};return n=S(n,r),C.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};C.groupBy=k(function(t,e,n){C.has(t,n)?t[n].push(e):t[n]=[e]}),C.indexBy=k(function(t,e,n){t[n]=e}),C.countBy=k(function(t,e,n){C.has(t,n)?t[n]++:t[n]=1}),C.toArray=function(t){return t?C.isArray(t)?d.call(t):w(t)?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:w(t)?t.length:C.keys(t).length},C.partition=function(t,e,n){e=S(e,n);var r=[],i=[];return C.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},C.first=C.head=C.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:C.initial(t,t.length-e)},C.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},C.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:C.rest(t,Math.max(0,t.length-e))},C.rest=C.tail=C.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var P=function(t,e,n,r){for(var i=[],o=0,s=r||0,a=I(t);a>s;s++){var c=t[s];if(w(c)&&(C.isArray(c)||C.isArguments(c))){e||(c=P(c,e,n));var h=0,u=c.length;for(i.length+=u;u>h;)i[o++]=c[h++]}else n||(i[o++]=c)}return i};C.flatten=function(t,e){return P(t,e,!1)},C.without=function(t){return C.difference(t,d.call(arguments,1))},C.uniq=C.unique=function(t,e,n,r){C.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=S(n,r));for(var i=[],o=[],s=0,a=I(t);a>s;s++){var c=t[s],h=n?n(c,s,t):c;e?(s&&o===h||i.push(c),o=h):n?C.contains(o,h)||(o.push(h),i.push(c)):C.contains(i,c)||i.push(c)}return i},C.union=function(){return C.uniq(P(arguments,!0,!0))},C.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=I(t);i>r;r++){var o=t[r];if(!C.contains(e,o)){for(var s=1;n>s&&C.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},C.difference=function(t){var e=P(arguments,!0,!0,1);return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){return C.unzip(arguments)},C.unzip=function(t){for(var e=t&&C.max(t,I).length||0,n=Array(e),r=0;e>r;r++)n[r]=C.pluck(t,r);return n},C.object=function(t,e){for(var n={},r=0,i=I(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},C.findIndex=o(1),C.findLastIndex=o(-1),C.sortedIndex=function(t,e,n,r){n=S(n,r,1);for(var i=n(e),o=0,s=I(t);s>o;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o},C.indexOf=s(1,C.findIndex,C.sortedIndex),C.lastIndexOf=s(-1,C.findLastIndex),C.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var x=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=A(t.prototype),s=t.apply(o,i);return C.isObject(s)?s:o};C.bind=function(t,e){if(E&&t.bind===E)return E.apply(t,d.call(arguments,1));if(!C.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return x(t,r,e,this,n.concat(d.call(arguments)))};return r},C.partial=function(t){var e=d.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),s=0;i>s;s++)o[s]=e[s]===C?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return x(t,n,this,this,o)};return n},C.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=C.bind(t[n],t);return t},C.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return C.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},C.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=C.partial(C.delay,C,1),C.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:C.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var h=C.now();a||n.leading!==!1||(a=h);var u=e-(h-a);return r=this,i=arguments,0>=u||u>e?(s&&(clearTimeout(s),s=null),a=h,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(c,u)),o}},C.debounce=function(t,e,n){var r,i,o,s,a,c=function(){var h=C.now()-s;e>h&&h>=0?r=setTimeout(c,e-h):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=C.now();var h=n&&!r;return r||(r=setTimeout(c,e)),h&&(a=t.apply(o,i),o=i=null),a}},C.wrap=function(t,e){return C.partial(e,t)},C.negate=function(t){return function(){return!t.apply(this,arguments)}},C.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},C.once=C.partial(C.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];C.keys=function(t){if(!C.isObject(t))return[];if(m)return m(t);var e=[];for(var n in t)C.has(t,n)&&e.push(n);return L&&a(t,e),e},C.allKeys=function(t){if(!C.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&a(t,e),e},C.values=function(t){for(var e=C.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},C.mapObject=function(t,e,n){e=S(e,n);for(var r,i=C.keys(t),o=i.length,s={},a=0;o>a;a++)r=i[a],s[r]=e(t[r],r,t);return s},C.pairs=function(t){for(var e=C.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},C.invert=function(t){for(var e={},n=C.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=O(C.allKeys),C.extendOwn=C.assign=O(C.keys),C.findKey=function(t,e,n){e=S(e,n);for(var r,i=C.keys(t),o=0,s=i.length;s>o;o++)if(r=i[o],e(t[r],r,t))return r},C.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;C.isFunction(e)?(i=C.allKeys(s),r=b(e,n)):(i=P(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var a=0,c=i.length;c>a;a++){var h=i[a],u=s[h];r(u,h,s)&&(o[h]=u)}return o},C.omit=function(t,e,n){if(C.isFunction(e))e=C.negate(e);else{var r=C.map(P(arguments,!1,!1,1),String);e=function(t,e){return!C.contains(r,e)}}return C.pick(t,e,n)},C.defaults=O(C.allKeys,!0),C.create=function(t,e){var n=A(t);return e&&C.extendOwn(n,e),n},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t},C.isMatch=function(t,e){var n=C.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var M=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var i=_.call(t);if(i!==_.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(C.isFunction(s)&&s instanceof s&&C.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!M(t[c],e[c],n,r))return!1}else{var h,u=C.keys(t);if(c=u.length,C.keys(e).length!==c)return!1;for(;c--;)if(h=u[c],!C.has(e,h)||!M(t[h],e[h],n,r))return!1}return n.pop(),r.pop(),!0};C.isEqual=function(t,e){return M(t,e)},C.isEmpty=function(t){return null==t?!0:w(t)&&(C.isArray(t)||C.isString(t)||C.isArguments(t))?0===t.length:0===C.keys(t).length},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=g||function(t){return"[object Array]"===_.call(t)},C.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},C.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){C["is"+t]=function(e){return _.call(e)==="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return C.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(C.isFunction=function(t){return"function"==typeof t||!1}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!==+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===_.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return null!=t&&y.call(t,e)},C.noConflict=function(){return c._=h,this},C.identity=function(t){return t},C.constant=function(t){return function(){return t}},C.noop=function(){},C.property=N,C.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},C.matcher=C.matches=function(t){return t=C.extendOwn({},t),function(e){return C.isMatch(e,t)}},C.times=function(t,e,n){var r=Array(Math.max(0,t));e=b(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},C.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},U=C.invert(B),j=function(t){var e=function(e){return t[e]},n="(?:"+C.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};C.escape=j(B),C.unescape=j(U),C.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),C.isFunction(r)?r.call(t):r};var $=0;C.uniqueId=function(t){var e=++$+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,F=function(t){return"\\"+q[t]};C.template=function(t,e,n){!e&&n&&(e=n),e=C.defaults({},e,C.templateSettings);var r=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace(H,F),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var c=function(t){return s.call(this,t,C)},h=e.variable||"obj";return c.source="function("+h+"){\n"+o+"}",c},C.chain=function(t){var e=C(t);return e._chain=!0,e};var W=function(t,e){return t._chain?C(e).chain():e};C.mixin=function(t){C.each(C.functions(t),function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),W(this,n.apply(C,t))}})},C.mixin(C),C.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],W(this,n)}}),C.each(["concat","join","slice"],function(t){var e=u[t];C.prototype[t]=function(){return W(this,e.apply(this._wrapped,arguments))}}),C.prototype.value=function(){return this._wrapped},C.prototype.valueOf=C.prototype.toJSON=C.prototype.value,C.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return C}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(this)},function(t,e,n){var r;(function(t,i){!function(o){function s(t){throw RangeError(P[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function c(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(k,".");var i=t.split("."),o=a(i,e).join(".");return r+o}function h(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function u(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:T}function p(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?L(t/O):t>>1,t+=L(t/e);t>x*b>>1;r+=T)t=L(t/x);return L(r+(x+1)*t/(t+S))}function d(t){var e,n,r,i,o,a,c,h,p,d,_=[],y=t.length,g=0,m=N,E=A;for(n=t.lastIndexOf(R),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&s("not-basic"),_.push(t.charCodeAt(r));for(i=n>0?n+1:0;y>i;){for(o=g,a=1,c=T;i>=y&&s("invalid-input"),h=l(t.charCodeAt(i++)),(h>=T||h>L((v-g)/a))&&s("overflow"),g+=h*a,p=E>=c?C:c>=E+b?b:c-E,!(p>h);c+=T)d=T-p,a>L(v/d)&&s("overflow"),a*=d;e=_.length+1,E=f(g-o,e,0==o),L(g/e)>v-m&&s("overflow"),m+=L(g/e),g%=e,_.splice(g++,0,m)}return u(_)}function _(t){var e,n,r,i,o,a,c,u,l,d,_,y,g,m,E,S=[];for(t=h(t),y=t.length,e=N,n=0,o=A,a=0;y>a;++a)_=t[a],128>_&&S.push(D(_));for(r=i=S.length,i&&S.push(R);y>r;){for(c=v,a=0;y>a;++a)_=t[a],_>=e&&c>_&&(c=_);for(g=r+1,c-e>L((v-n)/g)&&s("overflow"),n+=(c-e)*g,e=c,a=0;y>a;++a)if(_=t[a],e>_&&++n>v&&s("overflow"),_==e){for(u=n,l=T;d=o>=l?C:l>=o+b?b:l-o,!(d>u);l+=T)E=u-d,m=T-d,S.push(D(p(d+E%m,0))),u=L(E/m);S.push(D(p(u,0))),o=f(n,g,r==i),n=0,++r}++n,++e}return S.join("")}function y(t){return c(t,function(t){return I.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return c(t,function(t){return w.test(t)?"xn--"+_(t):t})}var m=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);(m.global===m||m.window===m||m.self===m)&&(o=m);var E,v=2147483647,T=36,C=1,b=26,S=38,O=700,A=72,N=128,R="-",I=/^xn--/,w=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=T-C,L=Math.floor,D=String.fromCharCode;E={version:"1.3.2",ucs2:{decode:h,encode:u},decode:d,encode:_,toASCII:g,toUnicode:y},r=function(){return E}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(20)(t),function(){return this}())},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&h(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return c(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}function c(t){return"string"==typeof t}function h(t){return"object"==typeof t&&null!==t}function u(t){return null===t}function l(t){return null==t}var p=n(62);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=r;var f=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,_=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(_),g=["'"].concat(y),m=["%","/","?",";","#"].concat(g),E=["/","?","#"],v=255,T=/^[a-z0-9A-Z_-]{0,63}$/,C=/^([a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=n(60);r.prototype.parse=function(t,e,n){if(!c(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=f.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||i&&S[i]||(r=r.substr(2),this.slashes=!0)}if(!S[i]&&(s||i&&!O[i])){for(var a=-1,h=0;h<E.length;h++){var u=r.indexOf(E[h]);-1!==u&&(-1===a||a>u)&&(a=u)}var l,d;d=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==d&&(l=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(l)),a=-1;for(var h=0;h<m.length;h++){var u=r.indexOf(m[h]);-1!==u&&(-1===a||a>u)&&(a=u)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var y=this.hostname.split(/\./),h=0,N=y.length;N>h;h++){var R=y[h];if(R&&!R.match(T)){for(var I="",w=0,k=R.length;k>w;w++)I+=R.charCodeAt(w)>127?"x":R[w];if(!I.match(T)){var P=y.slice(0,h),x=y.slice(h+1),L=R.match(C);L&&(P.push(L[1]),x.unshift(L[2])),x.length&&(r="/"+x.join(".")+r),this.hostname=P.join(".");break}}}if(this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),!_){for(var D=this.hostname.split("."),M=[],h=0;h<D.length;++h){var B=D[h];M.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(B):B)}this.hostname=M.join(".")}var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!b[o])for(var h=0,N=g.length;N>h;h++){var $=g[h],V=encodeURIComponent($);V===$&&(V=escape($)),r=r.split($).join(V)}var q=r.indexOf("#");-1!==q&&(this.hash=r.substr(q),r=r.slice(0,q));var H=r.indexOf("?");if(-1!==H?(this.search=r.substr(H),this.query=r.substr(H+1),e&&(this.query=A.parse(this.query)),r=r.slice(0,H)):e&&(this.search="",this.query={}),r&&(this.pathname=r),O[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",B=this.search||"";this.path=U+B}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=A.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||O[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(c(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),O[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!O[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||S[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",s=n.search||"";n.path=o+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),h=t.host||t.pathname&&"/"===t.pathname.charAt(0),p=h||a||n.host&&t.pathname,f=p,d=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],_=n.protocol&&!O[n.protocol];if(_&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),p=p&&(""===i[0]||""===d[0])),h)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=t.search,n.query=t.query;else if(!l(t.search)){if(_){n.hostname=n.host=d.shift();var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,u(n.pathname)&&u(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=d.slice(-1)[0],m=(n.host||t.host)&&("."===g||".."===g)||""===g,E=0,v=d.length;v>=0;v--)g=d[v],"."==g?d.splice(v,1):".."===g?(d.splice(v,1),E++):E&&(d.splice(v,1),E--);if(!p&&!f)for(;E--;E)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var T=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(_){n.hostname=n.host=T?"":d.length?d.shift():"";var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return p=p||n.host&&d.length,p&&!T&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),u(n.pathname)&&u(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,i){!function(o){function s(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function a(t){for(var e,n=t.length,r=-1,i="";++r<n;)e=t[r],e>65535&&(e-=65536,i+=v(e>>>10&1023|55296),e=56320|1023&e),i+=v(e);return i}function c(t){if(t>=55296&&57343>=t)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function h(t,e){return v(t>>e&63|128)}function u(t){if(0==(4294967168&t))return v(t);var e="";return 0==(4294965248&t)?e=v(t>>6&31|192):0==(4294901760&t)?(c(t),e=v(t>>12&15|224),e+=h(t,6)):0==(4292870144&t)&&(e=v(t>>18&7|240),e+=h(t,12),e+=h(t,6)),e+=v(63&t|128)}function l(t){for(var e,n=s(t),r=n.length,i=-1,o="";++i<r;)e=n[i],o+=u(e);return o}function p(){if(E>=m)throw Error("Invalid byte index");var t=255&g[E];if(E++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(){var t,e,n,r,i;if(E>m)throw Error("Invalid byte index");if(E==m)return!1;if(t=255&g[E],E++,0==(128&t))return t;if(192==(224&t)){var e=p();if(i=(31&t)<<6|e,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=p(),n=p(),i=(15&t)<<12|e<<6|n,i>=2048)return c(i),i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=p(),n=p(),r=p(),i=(15&t)<<18|e<<12|n<<6|r,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function d(t){g=s(t),m=g.length,E=0;for(var e,n=[];(e=f())!==!1;)n.push(e);return a(n)}var _="object"==typeof e&&e,y=("object"==typeof t&&t&&t.exports==_&&t,"object"==typeof i&&i);(y.global===y||y.window===y)&&(o=y);var g,m,E,v=String.fromCharCode,T={version:"2.0.0",encode:l,decode:d};r=function(){return T}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(20)(t),function(){return this}())},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),_(n)?r.showHidden=n:n&&e._extend(r,n),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function c(t,n,r){if(t.customInspect&&n&&A(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return E(i)||(i=c(t,i,r)),i}var o=h(t,n);if(o)return o;var s=Object.keys(n),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),O(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(n);if(0===s.length){if(A(n)){var y=n.name?": "+n.name:"";return t.stylize("[Function"+y+"]","special")}if(C(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(O(n))return u(n);
}var g="",m=!1,v=["{","}"];if(d(n)&&(m=!0,v=["[","]"]),A(n)){var T=n.name?": "+n.name:"";g=" [Function"+T+"]"}if(C(n)&&(g=" "+RegExp.prototype.toString.call(n)),S(n)&&(g=" "+Date.prototype.toUTCString.call(n)),O(n)&&(g=" "+u(n)),0===s.length&&(!m||0==n.length))return v[0]+g+v[1];if(0>r)return C(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var b;return b=m?l(t,n,r,_,s):s.map(function(e){return p(t,n,r,_,e,m)}),t.seen.pop(),f(b,g,v)}function h(t,e){if(T(e))return t.stylize("undefined","undefined");if(E(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i){for(var o=[],s=0,a=e.length;a>s;++s)k(e,String(s))?o.push(p(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))}),o}function p(t,e,n,r,i,o){var s,a,h;if(h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},h.get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(h.value)<0?(a=y(n)?c(t,h.value,null):c(t,h.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),T(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function E(t){return"string"==typeof t}function v(t){return"symbol"==typeof t}function T(t){return void 0===t}function C(t){return b(t)&&"[object RegExp]"===R(t)}function b(t){return"object"==typeof t&&null!==t}function S(t){return b(t)&&"[object Date]"===R(t)}function O(t){return b(t)&&("[object Error]"===R(t)||t instanceof Error)}function A(t){return"function"==typeof t}function N(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function R(t){return Object.prototype.toString.call(t)}function I(t){return 10>t?"0"+t.toString(10):t.toString(10)}function w(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P=/%[sdj%]/g;e.format=function(t){if(!E(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(P,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];o>n;a=r[++n])s+=y(a)||!b(a)?" "+a:" "+i(a);return s},e.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(T(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return o};var x,L={};e.debuglog=function(t){if(T(x)&&(x=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(x)){var n=r.pid;L[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else L[t]=function(){};return L[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=_,e.isNull=y,e.isNullOrUndefined=g,e.isNumber=m,e.isString=E,e.isSymbol=v,e.isUndefined=T,e.isRegExp=C,e.isObject=b,e.isDate=S,e.isError=O,e.isFunction=A,e.isPrimitive=N,e.isBuffer=n(65);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",w(),e.format.apply(e,arguments))},e.inherits=n(53),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(15))},function(t,e){},function(t,e){}])});